===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    8 Apr 2019
Tag Name:    pop2/branch_tags/nblocks_clean_up_tags/nblocks_clean_up_n03_cesm_pop_2_1_20190306
Tag Summary: C1850ECO compset fixes for nblocks_clinic==0 and nblocks_clinic<max_nblocks_clinic.
             Also increased size of test for gx1v7 (from 80 blocks to 144) to reduce
             memory footprint in ecosystem tests.

Testing: following tests now pass
SMS_D_P72x1.T62_g37.C1850ECO.hobart_nag.pop-ecosys_81blocks_100x116_spacecurve
SMS_D_P80x1.T62_g37.C1850ECO.hobart_nag.pop-ecosys_81blocks_100x116_spacecurve
SMS_D_P72x1.T62_g37.C1850ECO.cheyenne_intel.pop-ecosys_81blocks_100x116_spacecurve
SMS_D_P80x1.T62_g37.C1850ECO.cheyenne_intel.pop-ecosys_81blocks_100x116_spacecurve
SMS_D_P136x1.T62_g17.C1850ECO.cheyenne_intel.pop-ecosys_144blocks_320x384_spacecurve
SMS_D_P144x1.T62_g17.C1850ECO.cheyenne_intel.pop-ecosys_144blocks_320x384_spacecurve
(Note that gx1v7 with ecosystem is extremely slow running on 72 or 80 tasks on
hobart so I didn't even try.)

Files Modified:
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
A  +    cime_config/testdefs/testmods_dirs/pop/144blocks_320x384_spacecurve
        > moved from cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve
M  +    cime_config/testdefs/testmods_dirs/pop/144blocks_320x384_spacecurve/shell_commands
D       cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve
        > moved to cime_config/testdefs/testmods_dirs/pop/144blocks_320x384_spacecurve
D       cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve/shell_commands
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_144blocks_320x384_spacecurve
        > moved from cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve
M  +    cime_config/testdefs/testmods_dirs/pop/ecosys_144blocks_320x384_spacecurve/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_144blocks_320x384_spacecurve
D       cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve/include_user_mods
===============================================================================
Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 Apr 2019
Tag Name:    pop2/branch_tags/nblocks_clean_up_tags/nblocks_clean_up_n02_cesm_pop_2_1_20190306
Tag Summary: C compset fixes for nblocks_clinic==0 and nblocks_clinic<max_nblocks_clinic

Testing: following tests now pass
SMS_D_P80x1.T62_g17.C.hobart_nag.pop-80blocks_320x384_spacecurve
SMS_D_P48x1.T62_g17.C.hobart_nag.pop-80blocks_320x384_spacecurve
SMS_D_P81x1.T62_g37.C.hobart_nag.pop-81blocks_100x116_spacecurve
SMS_D_P48x1.T62_g37.C.hobart_nag.pop-81blocks_100x116_spacecurve

Files Modified:
M       BranchChangeLog
D       cime_config/testdefs/testmods_dirs/pop/80blocks
        > moved to cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve
D       cime_config/testdefs/testmods_dirs/pop/80blocks/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/80blocks/shell_commands
A  +    cime_config/testdefs/testmods_dirs/pop/80blocks_320x384_spacecurve
        > moved from cime_config/testdefs/testmods_dirs/pop/80blocks
A       cime_config/testdefs/testmods_dirs/pop/81blocks_100x116_spacecurve
A       cime_config/testdefs/testmods_dirs/pop/81blocks_100x116_spacecurve/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/81blocks_100x116_spacecurve/shell_commands
D       cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve
D       cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve
        > moved from cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks
M  +    cime_config/testdefs/testmods_dirs/pop/ecosys_80blocks_320x384_spacecurve/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_81blocks_100x116_spacecurve
A       cime_config/testdefs/testmods_dirs/pop/ecosys_81blocks_100x116_spacecurve/include_user_mods
M       drivers/cpl/ocn_comp_mct.F90
M       source/POP_SpaceCurveMod.F90
M       source/distribution.F90
M       source/geoheatflux.F90
M       source/overflows.F90
M       source/step_mod.F90
M       source/tavg.F90
M       source/tidal_mixing.F90

===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    2 Apr 2019
Tag Name:    pop2/branch_tags/nblocks_clean_up_tags/nblocks_clean_up_n01_cesm_pop_2_1_20190306
Tag Summary: Created a new test in the testmod directory to run with 80 blocks
             and a spacecurve decomposition. For a gx1v7 grid, this
             decomposition results in 79 active blocks, so it's good for
             testing two scenarios: (1) when nblocks_clinic is not the same
             across MPI tasks, and (2) the subset of the above when
             nblocks_clinic = 0 on some tasks. Case (2) seems to cause
             problems across multiple compilers, while NAG seems to be the
             only compiler that complains when nblocks_clinic <
             max_nblocks_clinic.

Testing:     Ran four tests that all failed

               SMS_D_P48x1.T62_g17.C.hobart_nag.pop-80blocks
               * overflows.F90, line 5708: Invalid reference to procedure
                 OVERFLOWS:OVF_HU - Dummy array HUM (number 2) has 9360 elements
                 but actual argument only has 1872 elements
               SMS_D_P80x1.T62_g17.C.hobart_nag.pop-80blocks
               * domain.F90, line 469: Undefined pointer BLOCKS_CLINIC used as
                 argument to intrinsic function ASSOCIATED
               SMS_D_P48x1.T62_g17.C1850ECO.hobart_nag.pop-ecosys_80blocks
               * overflows.F90, line 5708: Invalid reference to procedure
                 OVERFLOWS:OVF_HU - Dummy array HUM (number 2) has 9360 elements
                 but actual argument only has 1872 elements
               SMS_D_P80x1.T62_g17.C1850ECO.hobart_nag.pop-ecosys_80blocks
               * domain.F90, line 469: Undefined pointer BLOCKS_CLINIC used as
                 argument to intrinsic function ASSOCIATED

Files Modified:
===============================================================================
Tag Creator: mlevy
Developers:  mlevy
Tag Date:    2 Apr 2019
Tag Name:    pop2/branch_tags/nblocks_clean_up_tags/nblocks_clean_up_n00_cesm_pop_2_1_20190306
Tag Summary: Initial branch tag, identical to cesm_pop_2_1_20190306 trunk tag
===============================================================================
