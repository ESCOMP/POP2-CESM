===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    23 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n43_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: convert Schmidt numbers to Wanninkhof 2014

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n41 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of change to gas fluxes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/cfc_mod.F90
M       source/schmidt_number.F90
M       source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n42_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: set OCN_TAVG_DIC_ALT_CO2 in input_templates/ocn.ecosys.tavg.csh based on OCN_TRANSIENT

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n41 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n41_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: merge marbl_dev_n31 tag to this branch

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n40 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n40_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: move riv_flux out of ecosys, making it applicable for all passive tracers

compute MARBL surface_forcings ext_{C,P,Si}_flux from riv_flux_forcing_fields terms
   instead of riv_flux terms
split ecosys_driver_set_sflux into ecosys_driver_set_sflux_driver and ecosys_driver_set_sflux
call ecosys_driver_set_sflux per block, inside an OMP loop
add _dep to Fe_ind, bc_ind, dust_ind names, remove nox_ind, nhy_ind
change how riv_flux_forcing_fields are iterated on at runtime
rename ecosys_tavg_accumulate subroutine, removing surface terms from interior subroutine
increase per tracer field count in tavg.F90 to max_avail_tavg_fields
add global_sum timers

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n39 tag and same MARBL commit)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes to ecosys STF terms
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/forcing.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90
M       source/step_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    16 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n39_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: incorporate suggestions from code review of marbl_dev_klindsay_37 and marbl_dev_klindsay_n38

uniform naming convention for tavg river fluxes (${TRACER}_RIV_FLUX)
include NO3_RIV_FLUX contribution in ALK_RIV_FLUX
eliminate string compares in runtime riv_flux_forcing_fields loop
move date and time values from strdata_input_type type to local vars in POP_strdata_advance
maka array version of POP_strdata_advance
add trim to argument of select case statements
remove trailing whitespace

Testing:
MARBL commit 582a6203ad797900b0880b1b78fe3b440d2b6566

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n38 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff change to STF_ALK and change to ALK_RIV_FLUX
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ciso.tavg.csh
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/strdata_interface_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    15 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n38_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: move river fluxes from MARBL->driver, handle requested surface_forcings ext_{C,P,Si}_flux

river fluxes are not computed or used by MARBL, so we're moving them out to the driver
   this will also make it easier to couple them to POP's estuary box model
this fixed a bug that atm dep of PO4 was incorrectly included in the DIP_RIV_FLUX diagnostic
the added surface_forcings are needed when ladjust_bury_coeff=.true.

Testing:
MARBL commit 582a6203ad797900b0880b1b78fe3b440d2b6566

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n37 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes to surface fluxes and
        fix to DIP_RIV_FLUX diagnostic
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    11 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n37_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: coalesce strdata_input_type instances in ecosys_forcing_mod.F90 where possible

for ecosys forcing vars with field_source=='shr_stream', combine strdata_input_type entries
   that have identical filenames and year specs, reducing startup time and memory usage

move setting of strdata_inputlist components into forcing_file_type constructor

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n36 tag)
   all tests, except SMS_Ld2_D on hobart, pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    10 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n36_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: incorporate suggestions from code review of lvariable_PtoC code in marbl_dev_klindsay_n34

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n35 tag)
   all tests, except SMS_Ld2_D, pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n35_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: merge marbl_dev_n30 tag to this branch

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n34 tag)
   all tests, except baseline compares and SMS_Ld2_D, pass
      baselines fail because of changes on POP trunk
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildcpp
 M      drivers/cpl
M       drivers/cpl/POP_FinalMod.F90
 M      drivers/cpl_none
M       source/diagnostics.F90
M       source/ecosys_driver.F90
M       source/estuary_vsf_mod.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/passive_tracers.F90
M       source/tavg.F90
M       source/timers.F90
M       source/vmix_kpp.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n34_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: implement lvariable_PtoC flag

default value for flag is TRUE
flag is set in OCN_TRACER_MODULES_OPT in env_build.xml
   (because tracer count depends on this flag)

If lvariable_PtoC is FALSE, then following changes occur
   tracers for P content of autotrophs are omitted (i.e., 1 fewer tracer per autotroph)
   tavg vars related to P content of autotrophs are omitted

introduce test with lvariable_PtoC=FALSE

rename ECOSYS_NT -> ECOSYS_BASE_NT

ignore extra whitespace when parsing OCN_TRACER_MODULES_OPT and OCN_TRACER_MODULES

Testing: (with cesm2_0_beta05)
MARBL commit fc80f73432baf542fb4f380677ee5ba1deaef0e1

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n33 tag)
   all tests, except baseline compares, pass
      nlcomp comparisons fail because of introduction of lvariable_PtoC
      baseline comparisons fail because Ptot Jint integrals have roundoff changes
      some TPUTCOMP, MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildcpp
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC/shell_commands
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n33_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: rename ${TRACER}_RESTORE diagnostic to ${TRACER}_RESTORE_TEND

Testing: (with cesm2_0_beta05)
MARBL commit a9d4fbff856fcad28199bd6e37433532b0635011 (includes fix for MARBL issue #118)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n32 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because elemental Jint integrals changed (from #118 fix)
      baseline comparisons also fail because of history file varname change
      some TPUTCOMP, MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n32_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: remove interior_restore_diags, move these diags into interior_forcing_diags

Testing: (with cesm2_0_beta05)
MARBL commit eb3589dd8e7dfc2719fe22b5e6c50974eb9d348a

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n31 tag)
   all tests pass, except for
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n31_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: merge marbl_dev_n27 tag to this branch

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n30 tag)
   all tests pass, except for
      NLCOMP fails because moby_on was removed from pop_in
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       bld/build-namelist
D       bld/config_files
D       bld/config_files/definition.xml
D       bld/config_files/definition.xsl
D       bld/configure
M       bld/generate_pop_decomp.pl
A  +    bld/generate_pop_decomp.xml
D       bld/moby_activate.csh
D       bld/moby_deactivate.csh
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
D       bld/pop_decomp.xml
A  +    cime_config/buildcpp
M       cime_config/buildlib
M       cime_config/buildnml
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
 M      drivers/cpl
M       drivers/cpl/POP_FinalMod.F90
 M      drivers/cpl_none
D       input_templates/ocn.moby.tavg.csh
D       source/moby_mod.F90
D       source/moby_parms.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n30_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: change marginal sea restoring timescale to 2 years

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n29 tag)
   all tests pass, baseline comparisons fail because of changed answers
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n29_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: incorporate suggestions from code review of restoring code in marbl_dev_klindsay_n27

remove ecosys_restore_gx3v7 testmods_dirs and aux_pop_obgc_se test category
code cleanup (more consistent variable names, indentation style)

cleanup forcing_init_post_processing

unit_conv_factor now applied consistently to all time-varying forcing_fields at runtime
   and non-time-varying forcing_fields during init

land mask and univ_conv_factor application to 3D vars does not KMT
   if 3rd dimension is not depth (e.g. PAR_col_frac and surf_shortwave)

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n28 tag)
   all tests pass, except for
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       cime_config/testdefs/testlist_pop.xml
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    15 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n28_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: enable restoring of PO4,NO3,SiO3,ALK in marginal seas by default

restoring is to keep nutrients from drifting, which happens due to
   imbalance between riverine inputs and sediment burial
restoring timescale is 10 years (might change this later)
remove ecosys_restore_gx3v7 test from aux_pop_MARBL

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n26 tag)
   all tests pass, except for
      BASELINE tests fails because of restoring being turned on
      NLCOMP tests fails because some namelist did change
      some MEMLEAK, MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n27_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: implement restore_inv_tau_opt='file_time_invariant', change restore field_source='shr_stream'

reorder k and block loops for definition of POP_MCT_gsMap3d_o, POP_MCT_dom3d_o
add tintalgo argument to POP_strdata_create in strdata_interface_mod.F90
split ecosys_driver_set_interior_forcing out of ecosys_driver_set_interior
generalize tracking of shr_stream forcing indices
   add strdata_inputlist_ind to forcing_file_type type
write restoring tendency to tavg when lecosys_debug == ".false."
redefine ecosys_restore_gx3v7 testdef to be bfb with baseline while using new features
   used modified data file that is compatible with shr_stream
   use restore_inv_tau_opt='file_time_invariant', with temporary file

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n26 tag)
   all tests pass, except for
      NLCOMP fails because some namelist variables changed names
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
M       drivers/cpl/ocn_comp_mct.F90
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/passive_tracers.F90
M       source/strdata_interface_mod.F90

Performing status on external item at 'source/cvmix':
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n26_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: merge marbl_dev_n25 tag to this branch

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n25 tag)
   all tests pass, except for
      NLCOMP fails because some namelist variables changed names
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n25_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: incorporate suggestions from code review

rename fallback option read_and_scale to alt_field, make scalefactor optional

ensure presence of alt_field during fallback for define, prior to reading of field

remove fallback support for reading into model r4 variables
   all known practical fallback usecases read into model r8 variables
   it can be added back later if needed

add fallback method for tracer DIC_ALT_CO2

fix typos in BranchBranchChangeLog

Testing:
MARBL commit 6114cdb4ed5d0495beb0d34fd823700615305da9
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n24 tag)
   all tests, except some memleak and tput failures, pass

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/io_read_fallback_mod.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n24_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: enable ecosys tracers and saved state to be read from older IC/restart files

introduce io_read_fallback_mod.F90
   enable fallback methods for reading fields when they aren't in the input file
   supported fallback options are ['const', 'read_and_scale']

call io_read_fallback_mod routines in io.F90 for reading non-existant fields
   hooks are only in place for netcdf files

define fallback methdods in ecosys_tracers_and_saved_state_mod.F90 for the following:
   tracers: DOCr, Lig, spP, diatP, diazP
   saved_state: MARBL_PH_SURF, MARBL_PH_SURF_ALT_CO2, MARBL_PH_3D, MARBL_PH_3D_ALT_CO2

remove code that skips reading of non-existant saved_state fields in restart file
   rely on fallback methods instead

introduce new test, SMS CECO T62_g3xv6, that initializes ecosys tracers with
   older IC file that does not have Lig, spP, diatP, diazP tracers

tested by hand running a hybrid run off a previous coupled run without these same tracers

Testing:
MARBL commit 6114cdb4ed5d0495beb0d34fd823700615305da9
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n23 tag)
   all tests, except some memleak failures, pass
   new test also fails baseline comparison

Files Modified:
M       BranchBranchChangeLog
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7/user_nl_pop
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/io.F90
A       source/io_read_fallback_mod.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    28 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n23_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: merge marbl_dev_n23 tag to this branch

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n22 tag)
   all tests, except some memleak failures, pass

Files Modified:
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       mpi/POP_BroadcastMod.F90
M       mpi/POP_CommMod.F90
M       mpi/POP_HaloMod.F90
M       mpi/POP_RedistributeMod.F90
M       mpi/POP_ReductionsMod.F90
M       source/cfc11_mod.F90
M       source/estuary_vsf_mod.F90
M       source/forcing_ap.F90
M       source/forcing_sfwf.F90
M       source/forcing_shf.F90
M       source/forcing_ws.F90
M       source/grid.F90
M       source/initial.F90
M       source/io_binary.F90
M       source/overflows.F90
M       source/step_mod.F90
M       source/sw_absorption.F90
M       source/vmix_kpp.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n22_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: seperate Fe vent flux from Fe sed flux

changed numerous namelist parameter defaults related to fesedflux and feventflux

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n21 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because MARBL tracer source terms changed
      namelist baseline compares fail beaucase namelist vars changed

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n21_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: variable C:P ratios in autotrophs and POM

added 3 new tracers (1 per autotroph)

new iron_flux_input and init_ecosys_init_file datasets
converted rate namelist variables and parameters to per day instead of per sec
   Run-time code still uses the per sec variable.
   The only thing changed is the units outside of the code.
removed unneeded settings of tracer_init_ext(:)%mod_varname&ecosys_tracer_init_nml
changed numerous namelist parameter defaults

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n20 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because MARBL tracer source terms changed
      namelist baseline compares fail beaucase namelist vars changed

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n20_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: merge marbl_dev_n22 tag to this branch

Testing:
MARBL commit b4da535e090893a49c3d8fb05eca48f4e864b866
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n19 tag)
   all tests, except ciso baseline compares (including namelists), pass
      ciso baseline comparisons fail because ciso ic changed
      some memleak failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ciso/shell_commands
A  +    cime_config/testdefs/testmods_dirs/pop/ciso_daily_r4_tavg
A  +    cime_config/testdefs/testmods_dirs/pop/daily_r4_tavg
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_daily_r4_tavg
M       cime_config/testdefs/testmods_dirs/pop/presaero/shell_commands
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n19_marbl_dev_n20_cesm_pop_2_1_20161026
Tag Summary: change Fe & Lig namelist vars

removed CECO WW3->SWAV change used for testing

Testing:
MARBL commit c9ad801cb584f5babe110ea2049b27d35106a224
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n18 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because Fe and Lig source terms changed
      namelist baseline compares fail beaucase namelist vars changed
      some memleak failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/config_compsets.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n18_marbl_dev_n20_cesm_pop_2_1_20161026
Tag Summary: merge marbl_dev_n20 tag to this branch

accidentally included CECO WW3->SWAV change used for testing in this commit

Testing:
MARBL commit c36383a1a0c4b7cb98c214cc72097aad6dc0ed73
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_n20 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because iron scavenging changed
         RMS diffs in baseline compares to marbl_dev_n20 similar to diffs between marbl_dev_klindsay_n17 and marbl_dev_klindsay_n16
      some memleak failures

   noticed after committed that ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso failed
      this was tracked down to an uninitialized var in vmix_kpp.F90

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/config_files/definition.xml
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildlib
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
M       cime_config/config_pes.xml
M       cime_config/testdefs/testlist_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14_presaero/include_user_mods
M       cime_config/testdefs/testmods_dirs/pop/ciso/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/default/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ecosys_3steps/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
 M      drivers/cpl
M       drivers/cpl/POP_CplIndices.F90
M       drivers/cpl/POP_MCT_vars_mod.F90
M       drivers/cpl/ocn_comp_esmf.F90
M       drivers/cpl/ocn_comp_mct.F90
M       drivers/cpl/ocn_import_export.F90
 M      drivers/cpl_none
M       input_templates/gx1v6_tavg_contents
M       source/baroclinic.F90
M       source/budget_diagnostics.F90
M       source/diagnostics.F90
M       source/ecosys_driver.F90
A  +    source/ecosys_forcing_mod.F90
A  +    source/ecosys_tracers_and_saved_state_mod.F90
M       source/estuary_vsf_mod.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/forcing_sfwf.F90
M       source/grid.F90
M       source/hmix_gm.F90
M       source/ice.F90
M       source/initial.F90
M       source/io_tools.F90
M       source/io_types.F90
M       source/overflows.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90
M       source/prognostic.F90
M       source/qflux_mod.F90
M       source/restart.F90
M       source/step_mod.F90
M       source/strdata_interface_mod.F90
M       source/surface_hgt.F90
M       source/tavg.F90
M       source/time_management.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n17_marbl_dev_n14_cesm_pop_2_1_20160513
Tag Summary: add Lig tracer, iron-binding ligand

tracer count increased from 27 to 28, for new Lig tracer
add tavg_contents and namelist vars for new Lig tracer
change iron scavenging namelist var defaults
remove namelist vars no longer needed from previous iron scavenging formulation
change init_ecosys_init_file to temporary file that has new Lig tracer

Testing:
MARBL commit 4d5d5c90c035bd647b8e82c01d5e76961f435826

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n15 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because iron scavenging changed
      false passes for nl baseline compares

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    28 Oct 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n16_marbl_dev_n14_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev_n14 tag to this branch

no code or script changes

Testing: verified that code builds with ifort and gfortran

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n15_marbl_dev_n13_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev_n13 to this branch

also reintroduce lecosys_debug to build-namelist and namelist_defaults_pop.xml

Testing:
MARBL commit f9c5ac4dfbf95b0606644f40fdde04cd0aba468b

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n14 tag)
   all tests, except nl baseline compares, pass
      nl baseline compares fail because many nl vars have moved

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n14_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add datasets to namelist_defaults_pop.xml, incorporate suggestions from code review

add lapply_nhx_surface_emis datasets for OCN_TRANSIENT eq "1850-2000"
make lapply_nhx_surface_emis a local perl variable before passing to add_default

Testing:
MARBL commit 89e48440802f373015b66a531ee8fad2444bef82

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n11 tag)
   all tests pass

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    17 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n13_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add support for NHx emissions from BGC

new namelist variable lapply_nhx_surface_emis, default .false.
add new aux_pop_MARBL test where lapply_nhx_surface_emis is .true.
change NOx, NHy forcing datasets if lapply_nhx_surface_emis is .true.

Testing:
MARBL commit be96f6bf00672eb7c5b75da9abd23996f1d24971

aux_pop_MARBL (yellowstone/intel yellowstone/gnu hobart/nag): (baseline comparison to n11 tag)
   all tests pass
      some nlcomp tests fail because of added namelist variables
      new apply_nhx_surface_emis tests fail baseline compare

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    13 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n12_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n12 tag to this branch

no code or script changes

Testing: verified that code builds with ifort and gfortran

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n11_marbl_dev_n11_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n11 tag to this branch

Testing:
MARBL commit ec20fe2bacd93abd5126e2f9e2e49c42e1a5e998

aux_pop_MARBL (intel and gnu): (baseline comparison to n10 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n10_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: hobart/nag fix and cleanup from code review

fix IO format strings for nag (X -> 1X)
add valid_values to namelist vars in namelist_definition_pop.xml
remove unneeded use statements
refactor test definitions
add CECO ecosys_ladjust_bury_coeff test to hobart/nag

Testing:
MARBL commit 48f9406b5a1a8ba3c6566488d31edfd0486b504f

aux_pop_MARBL (intel and gnu): (baseline comparison to n09 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n09_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: implement global averages, scalar running means, ladjust_bury_coeff

global averages and scalar running means are computed in POP
   running means will be moved to MARBL later
introduce set_global_scalars to MARBL interface
introduce namelist vars for ladjust_bury_coeff
add test for ladjust_bury_coeff=.true.

Testing:
MARBL commit 99dee6ac49767996e314343aa15d4e2996802e00

aux_pop_MARBL (intel and gnu): (baseline comparison to n08 tag)
   all tests pass, with the following exceptions
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_ladjust_bury_coeff fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n08_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n10 tag to this branch

Testing:
MARBL commit 8b3b1e9449d609a17a5cd0fba6bb0c2bb3791808

aux_pop_MARBL (intel and gnu): (baseline comparison to n06 tag)
   (stored n06 baselines were accidentally done with pre-tagged version of code, resulting in some baseline fails)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/config_files/definition.xml
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
 M      drivers/cpl
A  +    input_templates/ocn.sf6.tavg.csh
M       source/POP_DistributionMod.F90
M       source/POP_SpaceCurveMod.F90
M       source/distribution.F90
M       source/domain.F90
M       source/passive_tracers.F90
M       source/restart.F90
A  +    source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n07_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: clean up comments, add new _CPL fields to lecosys_debug tavg output

Testing: verified that code builds with ifort and gfortran

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    10 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n06_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: enable iron flux to be derived from driver dust and black carbon

pass black carbon flux from coupler into MARBL, if requested
add iron_flux_source namelist variable, valid values='monthly-calendar,driver-derived'
add namelist variables related to iron_flux_source='driver-derived'
   iron_frac_in_dust, iron_frac_in_bc
add iron_flux_source='driver-derived' to cice_ecosys_dust_flux_driver test definition

Testing:
MARBL commit 8e9cd21960792dd0d87b86ae9b2c335b548d1191

aux_pop_MARBL (intel and gnu): (baseline comparison to n04 tag)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit/tag
   lack of subsequent tags indicates success

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n05_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: add testmods_dirs that were omitted in marbl_dev_klindsay_n03

Testing: none

Files Modified:
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n04_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: merge marbl_dev n07 tag to this branch

Testing:
MARBL commit 018d284ca4db1ecadbebccbe127fa665238a8bc8

aux_pop_MARBL: (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

aux_pop_MARBL (gnu): (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/baroclinic.F90
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90
A  +    source/estuary_vsf_mod.F90
M       source/forcing_coupled.F90
M       source/initial.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n03_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: add dust_flux_source namelist variable, valid values='monthly-calendar,driver'

add dust_flux_source namelist variable, valid values='monthly-calendar,driver'
add ERS.T62_g37.GECO.yellowstone_intel.pop-cice_ecosys_dust_flux_driver test
caveat: forgot to add testmods_dir for new test, this will be fixed in a later tag

Testing:
MARBL commit 8a67dffe09aad08daa84b23dfa1986f1aa04b1e0
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n02_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: cleanup of marbl_dev_klindsay_n01

remove unnecessary module use statement
place contents of this file into BranchBranchChangeLog
restore marbl_dev BranchChangeLog

Testing: confirmed successful build of CECO testcase with gnu

Files Modified:
A       BranchBranchChangeLog
M       BranchChangeLog
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n01_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: pass dust flux from coupler into MARBL, if requested

1) pack sum of dust flux fields from coupler into POP array
2) make POP dust flux field available via tavg (DUST_FLUX_CPL)
3) pass POP dust flux field to MARBL, if requested
4) apply unit_conv_factor to all input_forcing_data fields

Testing:
MARBL commit cb10c64aaa87fa262cb9a42ca822478fffd9d8eb
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   all tests pass

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   all tests pass

Files Modified:
M       BranchChangeLog
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Apr 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: Initial branch tag, identical to marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407 trunk tag

===============================================================================
