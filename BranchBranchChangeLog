===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n15_marbl_dev_n13_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev_n13 to this branch

also reintroduce lecosys_debug to build-namelist and namelist_defaults_pop.xml

Testing:
MARBL commit f9c5ac4dfbf95b0606644f40fdde04cd0aba468b

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n14 tag)
   all tests, except nl baseline compares, pass
      nl baseline compares fail because many nl vars have moved

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n14_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add datasets to namelist_defaults_pop.xml, incorporate suggestions from code review

add lapply_nhx_surface_emis datasets for OCN_TRANSIENT eq "1850-2000"
make lapply_nhx_surface_emis a local perl variable before passing to add_default

Testing:
MARBL commit 89e48440802f373015b66a531ee8fad2444bef82

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n11 tag)
   all tests pass

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    17 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n13_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add support for NHx emissions from BGC

new namelist variable lapply_nhx_surface_emis, default .false.
add new aux_pop_MARBL test where lapply_nhx_surface_emis is .true.
change NOx, NHy forcing datasets if lapply_nhx_surface_emis is .true.

Testing:
MARBL commit be96f6bf00672eb7c5b75da9abd23996f1d24971

aux_pop_MARBL (yellowstone/intel yellowstone/gnu hobart/nag): (baseline comparison to n11 tag)
   all tests pass
      some nlcomp tests fail because of added namelist variables
      new apply_nhx_surface_emis tests fail baseline compare

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    13 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n12_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n12 tag to this branch

no code or script changes

Testing: verified that code builds with ifort and gfortran

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n11_marbl_dev_n11_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n11 tag to this branch

Testing:
MARBL commit ec20fe2bacd93abd5126e2f9e2e49c42e1a5e998

aux_pop_MARBL (intel and gnu): (baseline comparison to n10 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n10_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: hobart/nag fix and cleanup from code review

fix IO format strings for nag (X -> 1X)
add valid_values to namelist vars in namelist_definition_pop.xml
remove unneeded use statements
refactor test definitions
add CECO ecosys_ladjust_bury_coeff test to hobart/nag

Testing:
MARBL commit 48f9406b5a1a8ba3c6566488d31edfd0486b504f

aux_pop_MARBL (intel and gnu): (baseline comparison to n09 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n09_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: implement global averages, scalar running means, ladjust_bury_coeff

global averages and scalar running means are computed in POP
   running means will be moved to MARBL later
introduce set_global_scalars to MARBL interface
introduce namelist vars for ladjust_bury_coeff
add test for ladjust_bury_coeff=.true.

Testing:
MARBL commit 99dee6ac49767996e314343aa15d4e2996802e00

aux_pop_MARBL (intel and gnu): (baseline comparison to n08 tag)
   all tests pass, with the following exceptions
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_ladjust_bury_coeff fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n08_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n10 tag to this branch

Testing:
MARBL commit 8b3b1e9449d609a17a5cd0fba6bb0c2bb3791808

aux_pop_MARBL (intel and gnu): (baseline comparison to n06 tag)
   (stored n06 baselines were accidentally done with pre-tagged version of code, resulting in some baseline fails)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/config_files/definition.xml
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
 M      drivers/cpl
A  +    input_templates/ocn.sf6.tavg.csh
M       source/POP_DistributionMod.F90
M       source/POP_SpaceCurveMod.F90
M       source/distribution.F90
M       source/domain.F90
M       source/passive_tracers.F90
M       source/restart.F90
A  +    source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n07_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: clean up comments, add new _CPL fields to lecosys_debug tavg output

Testing: verified that code builds with ifort and gfortran

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    10 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n06_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: enable iron flux to be derived from driver dust and black carbon

pass black carbon flux from coupler into MARBL, if requested
add iron_flux_source namelist variable, valid values='monthly-calendar,driver-derived'
add namelist variables related to iron_flux_source='driver-derived'
   iron_frac_in_dust, iron_frac_in_bc
add iron_flux_source='driver-derived' to cice_ecosys_dust_flux_driver test definition

Testing:
MARBL commit 8e9cd21960792dd0d87b86ae9b2c335b548d1191

aux_pop_MARBL (intel and gnu): (baseline comparison to n04 tag)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit/tag
   lack of subsequent tags indicates success

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n05_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: add testmods_dirs that were omitted in marbl_dev_klindsay_n03

Testing: none

Files Modified:
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n04_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: merge marbl_dev n07 tag to this branch

Testing:
MARBL commit 018d284ca4db1ecadbebccbe127fa665238a8bc8

aux_pop_MARBL: (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

aux_pop_MARBL (gnu): (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/baroclinic.F90
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90
A  +    source/estuary_vsf_mod.F90
M       source/forcing_coupled.F90
M       source/initial.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n03_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: add dust_flux_source namelist variable, valid values='monthly-calendar,driver'

add dust_flux_source namelist variable, valid values='monthly-calendar,driver'
add ERS.T62_g37.GECO.yellowstone_intel.pop-cice_ecosys_dust_flux_driver test
caveat: forgot to add testmods_dir for new test, this will be fixed in a later tag

Testing:
MARBL commit 8a67dffe09aad08daa84b23dfa1986f1aa04b1e0
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n02_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: cleanup of marbl_dev_klindsay_n01

remove unnecessary module use statement
place contents of this file into BranchBranchChangeLog
restore marbl_dev BranchChangeLog

Testing: confirmed successful build of CECO testcase with gnu

Files Modified:
A       BranchBranchChangeLog
M       BranchChangeLog
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n01_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: pass dust flux from coupler into MARBL, if requested

1) pack sum of dust flux fields from coupler into POP array
2) make POP dust flux field available via tavg (DUST_FLUX_CPL)
3) pass POP dust flux field to MARBL, if requested
4) apply unit_conv_factor to all input_forcing_data fields

Testing:
MARBL commit cb10c64aaa87fa262cb9a42ca822478fffd9d8eb
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   all tests pass

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   all tests pass

Files Modified:
M       BranchChangeLog
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Apr 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: Initial branch tag, identical to marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407 trunk tag

===============================================================================
