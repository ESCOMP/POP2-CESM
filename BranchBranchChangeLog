===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 Oct 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n86_marbl_dev_n58_cesm_pop_2_1_20170703
Tag Summary: convert code reading atm D14C and d13C timeseries to read netCDF

created forcing_timeseries_mod.F90, to read in 1D and 2D netCDF timeseries
  (could be used for cfc_mod and sf6_mod)
atm D14C is now in one file instead of three
created netCDF versions of existing atm D14C and d13C files
  changed namelist defaults to these
dimensions of c14_atm_forcing_data swapped from (time,3) to (3,time)
  this is more natural for netCDF data
replaced D13C with d13C in varnames
remove various unused local vars

Testing:
MARBL commit 2cb69eec8013aefcb5c505dc0c1104566b2ec487 master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n85)
   except for tests mentioned below, all tests pass
      NLCOMP failed for ciso_transient and abio_transient cases because of forcing file name changes
      some MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       source/abio_dic_dic14_mod.F90
M       source/c14_atm_forcing_mod.F90
M       source/ecosys_forcing_mod.F90
A       source/forcing_timeseries_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 Oct 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n85_marbl_dev_n58_cesm_pop_2_1_20170703
Tag Summary: refactor code setting atm D14C in abio and ecosys modules

move atm D14C reading code from abio_dic_dic14_mod.F90 and ecosys_forcing_mod.F90 to c14_atm_forcing_mod.F90
nlvar abio_atm_co2_d14c_opt split into abio_atm_co2_opt and abio_atm_d14c_opt
add test case for ciso_transient_abio_dic_dic14_transient
rename sub_name -> subname for consistency in various modules

Testing:
MARBL commit 2cb69eec8013aefcb5c505dc0c1104566b2ec487 master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n84)
   except for tests mentioned below, all tests pass
      NLCOMP and BASELINE failed for new test
      some MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14_transient/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ciso_transient_abio_dic_dic14_transient
A       cime_config/testdefs/testmods_dirs/pop/ciso_transient_abio_dic_dic14_transient/include_user_mods
M       source/abio_dic_dic14_mod.F90
A       source/c14_atm_forcing_mod.F90
M       source/cfc_mod.F90
M       source/ecosys_forcing_mod.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90
M       source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 Oct 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n84_marbl_dev_n58_cesm_pop_2_1_20170703
Tag Summary: revisions from code review of phys_cycle mods

Testing:
MARBL commit 2cb69eec8013aefcb5c505dc0c1104566b2ec487 master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n83)
   except for tests mentioned below, all tests pass
      all NLCOMP tests fail because of removal of init_iage_init_file_fmt default value
      some MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       cime_config/config_component.xml
M       cime_config/phys_cycle_postrun
M       cime_config/phys_cycle_prerun
D       cime_config/phys_cycle_use_forcings

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 Oct 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n83_marbl_dev_n58_cesm_pop_2_1_20170703
Tag Summary: merge marbl_dev_n58 tag to this branch

Testing:
MARBL commit 2cb69eec8013aefcb5c505dc0c1104566b2ec487 master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n82)
   except for tests mentioned below, all tests pass
      all NLCOMP tests fail because of rerrangement of marbl related namelists
      some MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildcpp
M       cime_config/buildnml
M       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC/shell_commands
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
A  +    source/namelist_from_str_mod.F90
M       source/prognostic.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Oct 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n82_marbl_dev_n56_cesm_pop_2_1_20170703
Tag Summary: remove diagnostics that were added in marbl_dev_klindsay_n78

Testing:
MARBL commit a0cfb212f2190d67c0c5c9365f27d882da162bea master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n81)
   except for tests mentioned below, all tests pass
      some MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 August 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n81_marbl_dev_n56_cesm_pop_2_1_20170703
Tag Summary: merge marbl_dev_n56 tag to this branch

Fixed a typo in cime_config/buildlib
Removed ocn_comp_esmf.F90

Testing:
MARBL commit 93431840a3cdc79c87af8be8916d97c129e53cef enhancement/partial_derivs branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n80)
   except for tests mentioned below, all tests pass
      some MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       cime_config/buildlib
 M      drivers/cpl
D       drivers/cpl/ocn_comp_esmf.F90
 M      drivers/cpl_none

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 August 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n80_marbl_dev_n54_cesm_pop_2_1_20170623
Tag Summary: merge marbl_dev_n54 tag to this branch

This updates aux_pop_MARBL tests to use gx1v7 instead of gx1v6

Testing:
MARBL commit 93431840a3cdc79c87af8be8916d97c129e53cef enhancement/partial_derivs branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n79)
   except for tests mentioned below, all tests pass
      g17 baseline comparisons fail because baseline doesn't exist
      some MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       cime_config/testdefs/testlist_pop.xml
 M      drivers/cpl
 M      drivers/cpl_none

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 July 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n79_marbl_dev_n52_cesm_pop_2_1_20170615
Tag Summary: merge marbl_dev_n52 tag to this branch

improve implementation of Robert filter restart file scalars

Testing:
MARBL commit 93431840a3cdc79c87af8be8916d97c129e53cef enhancement/partial_derivs branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n76)
   except for tests mentioned below, all tests pass
      some MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       cime_config/config_compsets.xml
M       source/abio_dic_dic14_mod.F90
M       source/cfc11_mod.F90
M       source/cfc_mod.F90
M       source/ecosys_driver.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/iage_mod.F90
M       source/io_binary.F90
M       source/io_netcdf.F90
M       source/io_types.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90
M       source/restart.F90
M       source/sf6_mod.F90
M       source/step_mod.F90
M       source/tavg.F90
M       source/time_management.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 July 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n78_marbl_dev_n50_cesm_pop_2_1_20170601
Tag Summary: add some diagnostics needed for the preconditioner for the Newton-Krylov solver for ecosys tracers

also switch path construction in cime_config/phys_cycle_postrun to use python's os.path.join

Testing:
MARBL commit 16f12b881749bb61e43a0de6e0a9a16dd0e1060a enhancement/partial_derivs branch

passed ERS.T62_g16.G1850ECOIAF.cheyenne_gnu.pop-cice_ecosys test, including baseline comparison

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/phys_cycle_postrun
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 June 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n77_marbl_dev_n50_cesm_pop_2_1_20170601
Tag Summary: rework how CONTINUE_RUN is set when phys_cycle is operating

set RESUBMIT_SETS_CONTINUE_RUN=FALSE in phys_cycle compsets,
   not in phys_cycle_{pre,post}run scripts
always set CONTINUE_RUN in phys_cycle_postrun

Testing:
MARBL commit a0cfb212f2190d67c0c5c9365f27d882da162bea master branch

ran separate cplhist phys_cycle test run on cheyenne/intel

Files Modified:
M       BranchBranchChangeLog
M       cime_config/config_compsets.xml
M       cime_config/phys_cycle_postrun
M       cime_config/phys_cycle_prerun

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    28 June 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n76_marbl_dev_n50_cesm_pop_2_1_20170601
Tag Summary: merge phys_cycle branch

iage, abio_dic_dic14, and ecosys utilize POP_RESTART_OVERRIDE if its value/='default'
   add init_iage_init_file_fmt default value to make this work
move add_default call for ladjust_bury_coeff prior to usage of ladjust_bury_coeff value
remove bad defintion of zooplankton_config%sname in namelist_definition_pop.xml

add new compsets: G1850ECO_CPLHIST, G1850ECO_CPLHIST_PHYS_CYCLE
add new POP env_run vars: POP_PHYS_RUN_CYCLE_LEN_YEAR, POP_PHYS_RUN_CUR_MON, POP_RESTART_OVERRIDE
add new cime_config scripts: phys_cycle_prerun, phys_cycle_postrun
   these are used in G1850ECO_CPLHIST_PHYS_CYCLE compset

Testing:
MARBL commit a0cfb212f2190d67c0c5c9365f27d882da162bea master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n75)
   except for tests mentioned below, all tests pass
      nlcomp fails because of addition of init_iage_init_file_fmt default value

Files Modified:
 M      .
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildnml
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
A  +    cime_config/phys_cycle_postrun
A  +    cime_config/phys_cycle_prerun
A  +    cime_config/phys_cycle_use_forcings
 M      drivers/cpl
 M      drivers/cpl_none

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    22 June 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n75_marbl_dev_n50_cesm_pop_2_1_20170601
Tag Summary: merge marbl_dev_n50 tag to this branch

includes answer changing mods in MARBL

Testing:
MARBL commit b85477f670f4e913a902557f34c3169617cb6523 master branch

aux_pop_MARBL cheyenne/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n74)
   except for tests mentioned below, all tests pass
      BASELINE tests fail because of answer changing mods in MARBL
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl
 M      drivers/cpl_none
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 June 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n74_marbl_dev_n47_cesm_pop_2_1_20170601
Tag Summary: merge marbl_dev_n47 tag to this branch

no code/script changes, just updating to marbl_dev_klindsay having been brought
to marbl_dev and trunk

Testing:
MARBL commit f959e7229b30fdc814bddb613e9ca5d3300c38c3 science/iron_scav_update branch

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n73)
   except for tests mentioned below, all tests pass
      some MEMLEAK and MEMCOMP failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl
 M      drivers/cpl_none

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    31 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n73_marbl_dev_n44_cesm_pop_2_1_20170516
Tag Summary: bug fix, correct fix in marbl_dev_klindsay_n72

subtraction of vsf_river_correction(2) from STF(2) in computation of FvPER omitted multiplication by MASK_ESTUARY

Testing:
MARBL commit f959e7229b30fdc814bddb613e9ca5d3300c38c3 science/iron_scav_update branch

aux_pop_MARBL hobart/nag:
   passed ERS_Ld5.T62_g37.C.hobart_nag.pop-default test with time_mix_opt = 'robert'

Files Modified:
M       BranchBranchChangeLog
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n72_marbl_dev_n44_cesm_pop_2_1_20170516
Tag Summary: bug fixes, correct handling of vsf_river_correction for passive tracers

vsf_river_correction(2) was incorrectly included in FvPER(n) and STF(n)
   because STF(n) was wrong, fixing this bug changes tracer values
vsf_river_correction(n), n=3..nt, was included in STF(n), but not FvPER(n)
   this is only a diagnostic bug

Testing:
MARBL commit f959e7229b30fdc814bddb613e9ca5d3300c38c3 science/iron_scav_update branch

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n71)
   except for tests mentioned below, all tests pass
      BASELINE tests fail because these bug fixes change answers
      some MEMLEAK and MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n71_marbl_dev_n44_cesm_pop_2_1_20170516
Tag Summary: add internal consistency checks

add ldebug flag, set to .true. when DEBUG=TRUE or in test suite (except in performance_eval)

add optional argument tag to global_sum functions
   verify that tag is consistent across all tasks, when debug==.true. and tag is present

add tag argument to global_sum calls in tavg_global, tavg_global_sum_2D, and tavg_local_spatial_avg

add consistency checks for the following
   tracer module index bounds
   scalar and 1D arguments to running_mean_init_var_vals
   scalar and 1D arguments to running_mean_update_var (if ldebug==.true.)

Testing:
MARBL commit f959e7229b30fdc814bddb613e9ca5d3300c38c3 science/iron_scav_update branch

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n70)
   except for tests mentioned below, all tests pass
      NLCOMP fails because of new nl var ldebug
      some MEMLEAK and MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/default/user_nl_pop
M       cime_config/testdefs/testmods_dirs/pop/performance_eval/user_nl_pop
M       mpi/POP_ReductionsMod.F90
M       mpi/global_reductions.F90
M       source/initial.F90
M       source/passive_tracer_tools.F90
M       source/prognostic.F90
M       source/running_mean_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n70_marbl_dev_n44_cesm_pop_2_1_20170516
Tag Summary: revisions from code review of n67 and n68 and fixes and additional test for hobart

code review:
fix typo in input_templates/ocn.ecosys.tavg.csh
fix I/O edit descriptors and add comments in var_consistency_mod.F90

hobart mods: 
add target attribute to fields being passed to POP I/O infrastructure
other misc changes to enable nag/DEBUG
new hobart test ERS_Ld5_D.T62_g37.C1850ECO.hobart_nag.pop-ecosys
increase task count for [tg]x1 to 120

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch
   plus non-tagged version of fix for MARBL bug #163

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n69)
   except for tests mentioned below, all tests pass
      NLCOMP and BASELINE fail for new test
      some TPUTCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       cime_config/config_pes.xml
M       cime_config/testdefs/testlist_pop.xml
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/hmix_aniso.F90
M       source/tidal_mixing.F90
M       source/var_consistency_mod.F90
M       source/vmix_kpp.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n69_marbl_dev_n44_cesm_pop_2_1_20170516
Tag Summary: merge marbl_dev_n44 tag to this branch

n44: merge pop trunk (20170516) onto marbl_dev
     bug fix in cubic root find for estuary box model
n43: Update default PE layouts and POP decompositions on NCAR machines

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch
   plus non-tagged version of fix for MARBL bug #163

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n68)
   except for tests mentioned below, all tests pass
      NLCOMP tests fail, only because of change to decompositions and PE layouts
      BASELINE tests fail because of change to decompositions and PE layouts
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       bld/generate_pop_decomp.xml
M       cime_config/config_pes.xml
M       cime_config/testdefs/testlist_pop.xml
A  +    cime_config/testdefs/testmods_dirs/pop/performance_eval
 M      drivers/cpl
 M      drivers/cpl_none
M       source/estuary_vsf_mod.F90
M       source/step_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n68_marbl_dev_n42_cesm_pop_2_1_20170508
Tag Summary: add running means of global scalars (e.g., bury coefficients) to tavg output

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch
   plus non-tagged version of fix for MARBL bug #163

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n67)
   except for tests mentioned below, all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n67_marbl_dev_n42_cesm_pop_2_1_20170508
Tag Summary: fix bug in processing of tavg_contents file (symptom was occasional hang in tavg global sums)

processing of tavg_contents file was sometimes accessing uninitialized rows of tavg_contents_request
   in subroutine init_tavg in tavg.F90
this sometimes led to hangs in global sums of tavg_global because different tasks had different flags
   for which fields were being averaged (which also led to inconsistent tavg buffer sizes)

add checks, using new module var_consistency_mod.F90, to verify that tavg buffer sizes are the same across all tasks

this fixed the ciso_transient ERS failure on cheyenne/intel first mentioned in n64

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch
   plus non-tagged version of fix for MARBL bug #163

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n65)
   except for tests mentioned below, all tests pass
      NLCOMP tests fail, because lecosys_debug was renamed to lecosys_tavg_all (compared to n65)
      BASELINE tests for ecosys_ladjust_bury_coeff failed becuase of fix for MARBL bug #163
      BASELINE test for ciso_transient on cheyenne/intel failed because baseline didn't exist
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/tavg.F90
A       source/var_consistency_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    19 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n66_marbl_dev_n42_cesm_pop_2_1_20170508
Tag Summary: improve logic for when alt_co2 tavg fields are written out, rename lecosys_debug to lecosys_tavg_all

New derived namelist var lecosys_tavg_alt_co2 determines when alt_co2 tavg fields are written out.
It is .true. unless atm_co2 and atm_alt_co2 forcing options are equivalent.

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch

aux_pop_MARBL yellowstone/{intel,gnu} --namelists-only : (baseline comparison to marbl_dev_klindsay_n65 tag on yellowstone)
   test fail, but only because lecosys_debug was renamed to lecosys_tavg_all

All paths in setting of lecosys_tavg_alt_co2 were tested in a separate test.

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/ecosys/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n65_marbl_dev_n42_cesm_pop_2_1_20170508
Tag Summary: revisions from code review of n61 and n63

add testmods_dirs for cfc_sf6 test
remove unneeded RUN_DAY_ONE var in build-namelist
base ndep file add_default calls on ndep_data_type, not ocn_transient
add ocn_transient tag to 1850-2000 shr_stream ndep settings in namelist defaults

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n64 tag on yellowstone)
   ERS.T62_g37.C1850ECO.cheyenne_intel.pop-ciso_transient failed, suspect is running out of memory
   all other tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cfc_sf6
A       cime_config/testdefs/testmods_dirs/pop/cfc_sf6/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cfc_sf6/shell_commands
A       cime_config/testdefs/testmods_dirs/pop/cfc_sf6/user_nl_pop

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n64_marbl_dev_n42_cesm_pop_2_1_20170508
Tag Summary: merge marbl_dev_n42 tag to this branch

n42: Allow ndep_data_type = "driver"
n41: Bring in latest marbl_dev_levy (remove surface mask)

Testing:
MARBL commit f14e4dfaad228100ff83f828d4ef767aff264f69 science/iron_scav_update branch

aux_pop_MARBL {yellowstone,cheyenne}/{intel,gnu}: (baseline comparison to marbl_dev_klindsay_n63 tag on yellowstone)
   ERS.T62_g37.C1850ECO.cheyenne_intel.pop-ciso_transient failed, suspect is running out of memory
   all other tests, except NLCOMP and BASELINE, pass
      NLCOMP tests fail because
         lapply_nhx_surface_emis renamed to lcompute_nhx_surface_emis, and changed value
         ndep datasets changed
      BASELINE tests fail because nml value changes changed results
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
 M      cime_config
M       cime_config/testdefs/testlist_pop.xml
D       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis
D       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/user_nl_pop
D       cime_config/testdefs/testmods_dirs/pop/ecosys_shr_stream
D       cime_config/testdefs/testmods_dirs/pop/ecosys_shr_stream/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/ecosys_shr_stream/user_nl_pop
 M      drivers/cpl
M       drivers/cpl/POP_CplIndices.F90
M       drivers/cpl/ocn_comp_mct.F90
M       drivers/cpl/ocn_import_export.F90
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/forcing_fields.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    17 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n63_marbl_dev_n40_cesm_pop_2_1_20170508
Tag Summary: compset settings corrections, add precip_fact_const nml var, add G1850ECOIAF test

compset settings corrections
   add ndep settings for OCN_TRANSIENT==CORE2
   set OCN_COUPLING=full for CPLHIST

Testing:
MARBL commit d7cc4ccd27cf4d3b8242e1164c62c38edfc61a0a science/iron_scav_update branch

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n62 tag)
   all tests, except NLCOMP and BASELINE for new test, pass
      NLCOMP tests fail because of new POP namelist variable
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/config_component.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/forcing_sfwf.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    14 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n62_marbl_dev_n40_cesm_pop_2_1_20170508
Tag Summary: merge marbl_dev_n40 tag to this branch

Testing:
MARBL commit d7cc4ccd27cf4d3b8242e1164c62c38edfc61a0a science/iron_scav_update branch

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n61 tag)
   all tests, except x1 baseline compares, pass
      x1 baseline comparisons fail because of bug fix from trunk
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/generate_pop_decomp.xml
M       cime_config/buildcpp
M       cime_config/config_component.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/forcing_shf.F90
M       source/grid.F90
M       source/step_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    14 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n61_marbl_dev_n38_cesm_pop_2_1_20170323
Tag Summary: compset updates/cleanup, rework cfc/sf6 initialization, cfc dataset/testing update

rename CECO and GECO compsets to C1850ECO and G1850ECO, to indicate 1850 forcings
add G1850ECOIAF compset

add sf6 to HIST and 5505 compsets
change pattern matching on HIST and 5505 compsets (to avoid matching HIST with CPLHIST)

add CORE2 as valid value to OCN_TRANSIENT
   add cfc/sf6 calendar offsets for this setting

improve cfc/sf6 initialization with runtime io_read_fallback_register_tracer const=c0
   if effective cfc/sf6 calendar year is less than p{cfc,sf6}_first_nonzero_year

updated atm cfc dataset

add cfc_sf6 test to aux_pop

Testing:
MARBL commit 3e74ee8400a3a7ea551be404ce162090cc595660 science/iron_scav_update branch

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n60 tag)
   baselines were renamed to account for compset name change
   ww3 required change for long restart filename
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/cfc_mod.F90
M       source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    6 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n60_marbl_dev_n38_cesm_pop_2_1_20170323
Tag Summary: updated default parms

Testing:
MARBL commit 3e74ee8400a3a7ea551be404ce162090cc595660 science/iron_scav_update branch

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n59 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of parameter value changes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n59_marbl_dev_n38_cesm_pop_2_1_20170323
Tag Summary: merge marbl_dev_n38 tag to this branch

Testing:
MARBL commit 46cb8345d3b8e0c787555bfceafba8b8592d4096

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n59 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n58_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: add ALK_ALT_CO2 tracer, P_CaCO3_ALT_CO2 sinking particle

new tracer and column_sinking_particle_type var enables DIC_ALT_CO2
   to not be impacted by increasing CO2 through altered CaCO3 burial
   because CaCO3 burial depends on DIC & ALK

also add feventflux for gx1v7 in namelist_defaults_pop.xml

Testing:
MARBL commit 9feb07077774a3d272464cf2ed8c7a9ceca2bd78

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n57 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_defaults_pop.xml
M       cime_config/buildcpp
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n57_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: minor revisions from code review, add STATE timer

Testing:
MARBL commit e908f8a8078e542192a65059f647239939f9d6ef

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n56 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/estuary_vsf_mod.F90
M       source/forcing_fields.F90
M       source/state_mod.F90
M       source/strdata_interface_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n56_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: convert xkw_coeff to Wanninkhof 2014

Testing:
MARBL commit e908f8a8078e542192a65059f647239939f9d6ef

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n55 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of change to gas fluxes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/cfc11_mod.F90
M       source/cfc_mod.F90
M       source/constants.F90
M       source/ecosys_forcing_mod.F90
M       source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n55_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: merge computation of STF(:,:,2) from 2 code blocks into 1

Testing:
MARBL commit a14b74407dcb1b1f8f1b289731e1bcad0d28ea47

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n54 tag)
   all tests, except x1 baseline compares, pass
      x1 baseline comparisons fail because of roundoff differences in STF(:,:,2)
         these diffs are not present in x3 tests because the EBM is off and no differences are introduced
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/forcing_coupled.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n54_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: add robustness checks to estuary_vsf_mod.F90

ensure that ROFF_F == 0 where est_thick_upper == 0 and MASK_ESTUARY == 1
ensure that STF_RIV == 0 where est_thick_upper == 0 and MASK_ESTUARY == 1
skip estuary_box_model computations if S_l <= 0, using limit as S_l->0

Testing:
MARBL commit a14b74407dcb1b1f8f1b289731e1bcad0d28ea47

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n53 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/estuary_vsf_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n53_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: change riv_flux_shr_stream defaults

Testing:
MARBL commit a14b74407dcb1b1f8f1b289731e1bcad0d28ea47

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n52 tag)
   all tests, except nlcomp and baseline compares, pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n52_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: generalize/refactor strdata_interface_mod and ecosys_forcing_mod

strdata_interface_mod:
introduce following subroutines/functions in
   POP_strdata_type_set, POP_strdata_type_match, POP_strdata_type_cp
   POP_strdata_type_append_field, POP_strdata_type_field_count

POP_strdata_type_set should be called before POP_strdata_create

POP_strdata_create has support for depth_flag, tintalgo, taxMode

ecosys_forcing_mod:
add tintalgo, taxMode to forcing_file_type in ecosys_forcing_mod
move ldim3_is_depth from forcing_fields_metadata_type to forcing_fields_type
add rank to forcing_fields_type

rank is now mandatory in add_forcing_field calls
dim3_len, ldim3_is_depth, tintalgo, and taxMode are optional in add_forcing_field calls

field allocation and initialization now occurs inside add_forcing_field/forcing_fields_add

Testing:
MARBL commit a14b74407dcb1b1f8f1b289731e1bcad0d28ea47

aux_pop_MARBL yellowstone/intel and yellowstone/gnu and hobart/nag: (baseline comparison to marbl_dev_klindsay_n51 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_forcing_mod.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/strdata_interface_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    22 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n51_marbl_dev_n36_cesm_pop_2_1_20170323
Tag Summary: merge marbl_dev_n36 tag to this branch

marbl_dev_n35 Summary: better logging messages
marbl_dev_n36 Summary: surface forcing only at ocean points

Testing:
MARBL commit a14b74407dcb1b1f8f1b289731e1bcad0d28ea47

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n50 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       source/ecosys_driver.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n50_marbl_dev_n34_cesm_pop_2_1_20170323
Tag Summary: merge marbl_dev_n34 tag to this branch

bring in changes from pop trunk, no marbl_dev specific changes

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n49 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because ice formation fix changes results
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       bld/build-namelist
M       bld/generate_pop_decomp.xml
M       bld/namelist_files/namelist_defaults_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A  +    cime_config/testdefs/testmods_dirs/pop/5day_tavg
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_5day_tavg
A  +    input_templates/gx1v7_1D_tavg_contents
A  +    input_templates/gx1v7_POP_DomainSizeMod.F90
A  +    input_templates/gx1v7_depth_accel
A  +    input_templates/gx1v7_domain_size.F90
A  +    input_templates/gx1v7_history_contents
A  +    input_templates/gx1v7_movie_contents
A  +    input_templates/gx1v7_niw_tavg_contents
A  +    input_templates/gx1v7_overflow
A  +    input_templates/gx1v7_region_ids
A  +    input_templates/gx1v7_tavg_contents
A  +    input_templates/gx1v7_tavg_contents_high_freq
A  +    input_templates/gx1v7_transport_contents
A  +    input_templates/gx1v7_vert_grid
M       source/baroclinic.F90
M       source/budget_diagnostics.F90
M       source/ice.F90
M       source/step_mod.F90
M       source/tavg.F90
M       source/timers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Apr 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n49_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: couple passive tracers to estuary model, estuary model code cleanup

introduce lhas_vflux, indicates which tracers use virtual flux

estuary_vsf_mod changes to enable EBM for passive tracers:
replace nt_est with nt
subroutine set_estuary_vsf_forcing changes
   compute FLUX_ROFF_VSF_SRF, and correction term, for lhas_vflux tracers

add STF_RIV to STF where MASK_ESTUARY_VSF == 0

tavg changes:
include STF_RIV and FLUX_ROFF_VSF_SRF in per-tracer STF tavg vars
include FLUX_ROFF_VSF_SRF in per-tracer FvPER tavg vars

remove vflux_flag from ecosys_forcing_mod.F90 (no longer necessary with surf_avg not being computed)

estuary_vsf_mod cleanup
rename module estuary_mod to estuary_vsf_mod, to be consistent with filename
abort if lestuary_on == .true. and lfw_as_salt_flx == .false.
   this combo not implemented
replace use of MASK_SR in estuary_vsf_mod MASK_ESTUARY
eliminate module variables FLUX_ROFF_VSF and FLUX_EXCH
   made them local vars in add_estuary_vsf_tracer_tend, and stripped tracer and block indices
add only clause to most module use statements

add_estuary_vsf_tracer_tend changes
   separate code into lvsf_river and lebm_on blocks
   add STF_RIV to VSF_SRF_p_RIV_FLUX (local copy of FLUX_ROFF_VSF_SRF)
   fuse n loops

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n48 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because enabling EBM for passive tracers changes results
         physics results do not change for chl_option = 'file'
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/baroclinic.F90
M       source/ecosys_forcing_mod.F90
M       source/estuary_vsf_mod.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/grid.F90
M       source/ice.F90
M       source/initial.F90
M       source/passive_tracers.F90
M       source/step_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 Mar 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n48_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: fix namelist defaults for riv_flux_shr_stream_file, again

gx1v6 riv_flux_shr_stream_file had gx3v7 in path instead of gx1v6

Testing: none

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_defaults_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n47_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: fix namelist defaults for riv_flux_shr_stream_file

previous tag accidentally used files in /glade/scratch/klindsay
   instead of copy in inputdata

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n45 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes in strdata interpolation compared to POP monthly calendar
      namelist baseline comparisons fail because of namelist changes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_defaults_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n46_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: change field_source to shr_stream for riv_flux forcing

change associated namelist inputs

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n45 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes in strdata interpolation compared to POP monthly calendar
      namelist baseline comparisons fail because of namelist changes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n45_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: fix for problem with nblocks_clinic/=max_blocks_clinic

there is an apparent incompatibility between some OpenMP and associate constructs
   that caused problems when nblocks_clinic/=max_blocks_clinic
   workaround is to comment out a particular associate construct inside an OpenMP loop in ecosys_driver.F90

also switch max_blocks_clinc to nblocks_clinic in ecosys_driver.F90 where easily done

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n44 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n44_marbl_dev_n33_cesm_pop_2_1_20170222a
Tag Summary: merge marbl_dev_n33 tag to this branch

bring in changes from pop trunk, no marbl_dev specific changes

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n43 tag)
   all tests, except robert filter (RF) baseline compares, pass
      baseline comparisons fail because of changes RF global sum changes from pop trunk update
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
 M      drivers/cpl
 M      drivers/cpl_none
M       source/budget_diagnostics.F90
M       source/io_netcdf.F90
M       source/io_pio.F90
M       source/step_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    23 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n43_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: convert Schmidt numbers to Wanninkhof 2014

Testing:
MARBL commit 3dab77460e49a7f2909cbb8fc61a64740f9a49c3

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n41 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of change to gas fluxes
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/cfc_mod.F90
M       source/schmidt_number.F90
M       source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n42_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: set OCN_TAVG_DIC_ALT_CO2 in input_templates/ocn.ecosys.tavg.csh based on OCN_TRANSIENT

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n41 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n41_marbl_dev_n31_cesm_pop_2_1_20170128
Tag Summary: merge marbl_dev_n31 tag to this branch

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n40 tag)
   all tests pass
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    18 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n40_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: move riv_flux out of ecosys, making it applicable for all passive tracers

compute MARBL surface_forcings ext_{C,P,Si}_flux from riv_flux_forcing_fields terms
   instead of riv_flux terms
split ecosys_driver_set_sflux into ecosys_driver_set_sflux_driver and ecosys_driver_set_sflux
call ecosys_driver_set_sflux per block, inside an OMP loop
add _dep to Fe_ind, bc_ind, dust_ind names, remove nox_ind, nhy_ind
change how riv_flux_forcing_fields are iterated on at runtime
rename ecosys_tavg_accumulate subroutine, removing surface terms from interior subroutine
increase per tracer field count in tavg.F90 to max_avail_tavg_fields
add global_sum timers

Testing:
MARBL commit 5440f4090f91ba25071d4e6e6aadacf93ca17b3a

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n39 tag and same MARBL commit)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes to ecosys STF terms
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/forcing.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90
M       source/step_mod.F90
M       source/tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    16 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n39_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: incorporate suggestions from code review of marbl_dev_klindsay_37 and marbl_dev_klindsay_n38

uniform naming convention for tavg river fluxes (${TRACER}_RIV_FLUX)
include NO3_RIV_FLUX contribution in ALK_RIV_FLUX
eliminate string compares in runtime riv_flux_forcing_fields loop
move date and time values from strdata_input_type type to local vars in POP_strdata_advance
maka array version of POP_strdata_advance
add trim to argument of select case statements
remove trailing whitespace

Testing:
MARBL commit 582a6203ad797900b0880b1b78fe3b440d2b6566

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n38 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff change to STF_ALK and change to ALK_RIV_FLUX
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ciso.tavg.csh
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/strdata_interface_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    15 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n38_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: move river fluxes from MARBL->driver, handle requested surface_forcings ext_{C,P,Si}_flux

river fluxes are not computed or used by MARBL, so we're moving them out to the driver
   this will also make it easier to couple them to POP's estuary box model
this fixed a bug that atm dep of PO4 was incorrectly included in the DIP_RIV_FLUX diagnostic
the added surface_forcings are needed when ladjust_bury_coeff=.true.

Testing:
MARBL commit 582a6203ad797900b0880b1b78fe3b440d2b6566

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n37 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because of roundoff changes to surface fluxes and
        fix to DIP_RIV_FLUX diagnostic
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tavg.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    11 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n37_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: coalesce strdata_input_type instances in ecosys_forcing_mod.F90 where possible

for ecosys forcing vars with field_source=='shr_stream', combine strdata_input_type entries
   that have identical filenames and year specs, reducing startup time and memory usage

move setting of strdata_inputlist components into forcing_file_type constructor

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n36 tag)
   all tests, except SMS_Ld2_D on hobart, pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    10 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n36_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: incorporate suggestions from code review of lvariable_PtoC code in marbl_dev_klindsay_n34

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n35 tag)
   all tests, except SMS_Ld2_D, pass
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n35_marbl_dev_n30_cesm_pop_2_1_20170128
Tag Summary: merge marbl_dev_n30 tag to this branch

Testing:
MARBL commit 389e0e1d7103c8ce3649bd669962716833ebc503

aux_pop_MARBL hobart/nag: (baseline comparison to marbl_dev_klindsay_n34 tag)
   all tests, except baseline compares and SMS_Ld2_D, pass
      baselines fail because of changes on POP trunk
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildcpp
 M      drivers/cpl
M       drivers/cpl/POP_FinalMod.F90
 M      drivers/cpl_none
M       source/diagnostics.F90
M       source/ecosys_driver.F90
M       source/estuary_vsf_mod.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/passive_tracers.F90
M       source/tavg.F90
M       source/timers.F90
M       source/vmix_kpp.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Feb 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n34_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: implement lvariable_PtoC flag

default value for flag is TRUE
flag is set in OCN_TRACER_MODULES_OPT in env_build.xml
   (because tracer count depends on this flag)

If lvariable_PtoC is FALSE, then following changes occur
   tracers for P content of autotrophs are omitted (i.e., 1 fewer tracer per autotroph)
   tavg vars related to P content of autotrophs are omitted

introduce test with lvariable_PtoC=FALSE

rename ECOSYS_NT -> ECOSYS_BASE_NT

ignore extra whitespace when parsing OCN_TRACER_MODULES_OPT and OCN_TRACER_MODULES

Testing: (with cesm2_0_beta05)
MARBL commit fc80f73432baf542fb4f380677ee5ba1deaef0e1

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n33 tag)
   all tests, except baseline compares, pass
      nlcomp comparisons fail because of introduction of lvariable_PtoC
      baseline comparisons fail because Ptot Jint integrals have roundoff changes
      some TPUTCOMP, MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildcpp
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_fixed_PtoC/shell_commands
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n33_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: rename ${TRACER}_RESTORE diagnostic to ${TRACER}_RESTORE_TEND

Testing: (with cesm2_0_beta05)
MARBL commit a9d4fbff856fcad28199bd6e37433532b0635011 (includes fix for MARBL issue #118)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n32 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because elemental Jint integrals changed (from #118 fix)
      baseline comparisons also fail because of history file varname change
      some TPUTCOMP, MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    27 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n32_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: remove interior_restore_diags, move these diags into interior_forcing_diags

Testing: (with cesm2_0_beta05)
MARBL commit eb3589dd8e7dfc2719fe22b5e6c50974eb9d348a

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n31 tag)
   all tests pass, except for
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    26 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n31_marbl_dev_n27_cesm_pop_2_1_20170120
Tag Summary: merge marbl_dev_n27 tag to this branch

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n30 tag)
   all tests pass, except for
      NLCOMP fails because moby_on was removed from pop_in
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       bld/build-namelist
D       bld/config_files
D       bld/config_files/definition.xml
D       bld/config_files/definition.xsl
D       bld/configure
M       bld/generate_pop_decomp.pl
A  +    bld/generate_pop_decomp.xml
D       bld/moby_activate.csh
D       bld/moby_deactivate.csh
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
D       bld/pop_decomp.xml
A  +    cime_config/buildcpp
M       cime_config/buildlib
M       cime_config/buildnml
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
 M      drivers/cpl
M       drivers/cpl/POP_FinalMod.F90
 M      drivers/cpl_none
D       input_templates/ocn.moby.tavg.csh
D       source/moby_mod.F90
D       source/moby_parms.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n30_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: change marginal sea restoring timescale to 2 years

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n29 tag)
   all tests pass, baseline comparisons fail because of changed answers
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n29_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: incorporate suggestions from code review of restoring code in marbl_dev_klindsay_n27

remove ecosys_restore_gx3v7 testmods_dirs and aux_pop_obgc_se test category
code cleanup (more consistent variable names, indentation style)

cleanup forcing_init_post_processing

unit_conv_factor now applied consistently to all time-varying forcing_fields at runtime
   and non-time-varying forcing_fields during init

land mask and univ_conv_factor application to 3D vars does not KMT
   if 3rd dimension is not depth (e.g. PAR_col_frac and surf_shortwave)

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n28 tag)
   all tests pass, except for
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       cime_config/testdefs/testlist_pop.xml
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/ecosys_tracers_and_saved_state_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    15 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n28_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: enable restoring of PO4,NO3,SiO3,ALK in marginal seas by default

restoring is to keep nutrients from drifting, which happens due to
   imbalance between riverine inputs and sediment burial
restoring timescale is 10 years (might change this later)
remove ecosys_restore_gx3v7 test from aux_pop_MARBL

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n26 tag)
   all tests pass, except for
      BASELINE tests fails because of restoring being turned on
      NLCOMP tests fails because some namelist did change
      some MEMLEAK, MEMCOMP failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 Jan 2017
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n27_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: implement restore_inv_tau_opt='file_time_invariant', change restore field_source='shr_stream'

reorder k and block loops for definition of POP_MCT_gsMap3d_o, POP_MCT_dom3d_o
add tintalgo argument to POP_strdata_create in strdata_interface_mod.F90
split ecosys_driver_set_interior_forcing out of ecosys_driver_set_interior
generalize tracking of shr_stream forcing indices
   add strdata_inputlist_ind to forcing_file_type type
write restoring tendency to tavg when lecosys_debug == ".false."
redefine ecosys_restore_gx3v7 testdef to be bfb with baseline while using new features
   used modified data file that is compatible with shr_stream
   use restore_inv_tau_opt='file_time_invariant', with temporary file

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n26 tag)
   all tests pass, except for
      NLCOMP fails because some namelist variables changed names
      some MEMLEAK failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
M       drivers/cpl/ocn_comp_mct.F90
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/passive_tracers.F90
M       source/strdata_interface_mod.F90

Performing status on external item at 'source/cvmix':
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    29 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n26_marbl_dev_n25_cesm_pop_2_1_20161116
Tag Summary: merge marbl_dev_n25 tag to this branch

Testing:
MARBL commit dacd523d88fc35ad67dbd6338e962f6eead8b218
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n25 tag)
   all tests pass, except for
      NLCOMP fails because some namelist variables changed names
      some MEMLEAK failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
 M      drivers/cpl
 M      drivers/cpl_none
M       source/ecosys_driver.F90
M       source/ecosys_forcing_mod.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n25_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: incorporate suggestions from code review

rename fallback option read_and_scale to alt_field, make scalefactor optional

ensure presence of alt_field during fallback for define, prior to reading of field

remove fallback support for reading into model r4 variables
   all known practical fallback usecases read into model r8 variables
   it can be added back later if needed

add fallback method for tracer DIC_ALT_CO2

fix typos in BranchBranchChangeLog

Testing:
MARBL commit 6114cdb4ed5d0495beb0d34fd823700615305da9
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n24 tag)
   all tests, except some memleak and tput failures, pass

Files Modified:
M       BranchBranchChangeLog
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/io_read_fallback_mod.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Dec 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n24_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: enable ecosys tracers and saved state to be read from older IC/restart files

introduce io_read_fallback_mod.F90
   enable fallback methods for reading fields when they aren't in the input file
   supported fallback options are ['const', 'read_and_scale']

call io_read_fallback_mod routines in io.F90 for reading non-existant fields
   hooks are only in place for netcdf files

define fallback methdods in ecosys_tracers_and_saved_state_mod.F90 for the following:
   tracers: DOCr, Lig, spP, diatP, diazP
   saved_state: MARBL_PH_SURF, MARBL_PH_SURF_ALT_CO2, MARBL_PH_3D, MARBL_PH_3D_ALT_CO2

remove code that skips reading of non-existant saved_state fields in restart file
   rely on fallback methods instead

introduce new test, SMS CECO T62_g3xv6, that initializes ecosys tracers with
   older IC file that does not have Lig, spP, diatP, diazP tracers

tested by hand running a hybrid run off a previous coupled run without these same tracers

Testing:
MARBL commit 6114cdb4ed5d0495beb0d34fd823700615305da9
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel, yellowstone/gnu, hobart/nag: (baseline comparison to marbl_dev_klindsay_n23 tag)
   all tests, except some memleak failures, pass
   new test also fails baseline comparison

Files Modified:
M       BranchBranchChangeLog
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_read_fallback_gx3v7/user_nl_pop
M       source/ecosys_tracers_and_saved_state_mod.F90
M       source/io.F90
A       source/io_read_fallback_mod.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    28 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n23_marbl_dev_n23_cesm_pop_2_1_20161116
Tag Summary: merge marbl_dev_n23 tag to this branch

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n22 tag)
   all tests, except some memleak failures, pass

Files Modified:
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       mpi/POP_BroadcastMod.F90
M       mpi/POP_CommMod.F90
M       mpi/POP_HaloMod.F90
M       mpi/POP_RedistributeMod.F90
M       mpi/POP_ReductionsMod.F90
M       source/cfc11_mod.F90
M       source/estuary_vsf_mod.F90
M       source/forcing_ap.F90
M       source/forcing_sfwf.F90
M       source/forcing_shf.F90
M       source/forcing_ws.F90
M       source/grid.F90
M       source/initial.F90
M       source/io_binary.F90
M       source/overflows.F90
M       source/step_mod.F90
M       source/sw_absorption.F90
M       source/vmix_kpp.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n22_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: seperate Fe vent flux from Fe sed flux

changed numerous namelist parameter defaults related to fesedflux and feventflux

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n21 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because MARBL tracer source terms changed
      namelist baseline compares fail beaucase namelist vars changed

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       source/ecosys_forcing_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n21_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: variable C:P ratios in autotrophs and POM

added 3 new tracers (1 per autotroph)

new iron_flux_input and init_ecosys_init_file datasets
converted rate namelist variables and parameters to per day instead of per sec
   Run-time code still uses the per sec variable.
   The only thing changed is the units outside of the code.
removed unneeded settings of tracer_init_ext(:)%mod_varname&ecosys_tracer_init_nml
changed numerous namelist parameter defaults

Testing:
MARBL commit 5b354ed2ebcae7721a7306ac95ead3d1012c0992
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n20 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because MARBL tracer source terms changed
      namelist baseline compares fail beaucase namelist vars changed

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n20_marbl_dev_n22_cesm_pop_2_1_20161026
Tag Summary: merge marbl_dev_n22 tag to this branch

Testing:
MARBL commit b4da535e090893a49c3d8fb05eca48f4e864b866
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n19 tag)
   all tests, except ciso baseline compares (including namelists), pass
      ciso baseline comparisons fail because ciso ic changed
      some memleak failures

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ciso/shell_commands
A  +    cime_config/testdefs/testmods_dirs/pop/ciso_daily_r4_tavg
A  +    cime_config/testdefs/testmods_dirs/pop/daily_r4_tavg
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_daily_r4_tavg
M       cime_config/testdefs/testmods_dirs/pop/presaero/shell_commands
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n19_marbl_dev_n20_cesm_pop_2_1_20161026
Tag Summary: change Fe & Lig namelist vars

removed CECO WW3->SWAV change used for testing

Testing:
MARBL commit c9ad801cb584f5babe110ea2049b27d35106a224
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)
tested with bugfix for vmix_kpp.F90 uninitialized var
   to get ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso test to pass

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n18 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because Fe and Lig source terms changed
      namelist baseline compares fail beaucase namelist vars changed
      some memleak failures

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/config_compsets.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n18_marbl_dev_n20_cesm_pop_2_1_20161026
Tag Summary: merge marbl_dev_n20 tag to this branch

accidentally included CECO WW3->SWAV change used for testing in this commit

Testing:
MARBL commit c36383a1a0c4b7cb98c214cc72097aad6dc0ed73
tested with WW3->SWAV in CECO definition (to get CECO ERI test to pass)

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_n20 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because iron scavenging changed
         RMS diffs in baseline compares to marbl_dev_n20 similar to diffs between marbl_dev_klindsay_n17 and marbl_dev_klindsay_n16
      some memleak failures

   noticed after committed that ERS_Ld5_D.T62_g37.GECO.yellowstone_intel.pop-cice_ciso failed
      this was tracked down to an uninitialized var in vmix_kpp.F90

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/config_files/definition.xml
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/buildlib
M       cime_config/config_component.xml
M       cime_config/config_compsets.xml
M       cime_config/config_pes.xml
M       cime_config/testdefs/testlist_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/abio_dic_dic14_presaero/include_user_mods
M       cime_config/testdefs/testmods_dirs/pop/ciso/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/default/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ecosys_3steps/shell_commands
M       cime_config/testdefs/testmods_dirs/pop/ecosys_restore_gx3v7/user_nl_pop
 M      drivers/cpl
M       drivers/cpl/POP_CplIndices.F90
M       drivers/cpl/POP_MCT_vars_mod.F90
M       drivers/cpl/ocn_comp_esmf.F90
M       drivers/cpl/ocn_comp_mct.F90
M       drivers/cpl/ocn_import_export.F90
 M      drivers/cpl_none
M       input_templates/gx1v6_tavg_contents
M       source/baroclinic.F90
M       source/budget_diagnostics.F90
M       source/diagnostics.F90
M       source/ecosys_driver.F90
A  +    source/ecosys_forcing_mod.F90
A  +    source/ecosys_tracers_and_saved_state_mod.F90
M       source/estuary_vsf_mod.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_pt_interior.F90
M       source/forcing_s_interior.F90
M       source/forcing_sfwf.F90
M       source/grid.F90
M       source/hmix_gm.F90
M       source/ice.F90
M       source/initial.F90
M       source/io_tools.F90
M       source/io_types.F90
M       source/overflows.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90
M       source/prognostic.F90
M       source/qflux_mod.F90
M       source/restart.F90
M       source/step_mod.F90
M       source/strdata_interface_mod.F90
M       source/surface_hgt.F90
M       source/tavg.F90
M       source/time_management.F90
===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    1 Nov 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n17_marbl_dev_n14_cesm_pop_2_1_20160513
Tag Summary: add Lig tracer, iron-binding ligand

tracer count increased from 27 to 28, for new Lig tracer
add tavg_contents and namelist vars for new Lig tracer
change iron scavenging namelist var defaults
remove namelist vars no longer needed from previous iron scavenging formulation
change init_ecosys_init_file to temporary file that has new Lig tracer

Testing:
MARBL commit 4d5d5c90c035bd647b8e82c01d5e76961f435826

aux_pop_MARBL yellowstone/intel and yellowstone/gnu: (baseline comparison to marbl_dev_klindsay_n15 tag)
   all tests, except baseline compares, pass
      baseline comparisons fail because iron scavenging changed
      false passes for nl baseline compares

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    28 Oct 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n16_marbl_dev_n14_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev_n14 tag to this branch

no code or script changes

Testing: verified that code builds with ifort and gfortran

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    21 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n15_marbl_dev_n13_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev_n13 to this branch

also reintroduce lecosys_debug to build-namelist and namelist_defaults_pop.xml

Testing:
MARBL commit f9c5ac4dfbf95b0606644f40fdde04cd0aba468b

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n14 tag)
   all tests, except nl baseline compares, pass
      nl baseline compares fail because many nl vars have moved

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    20 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n14_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add datasets to namelist_defaults_pop.xml, incorporate suggestions from code review

add lapply_nhx_surface_emis datasets for OCN_TRANSIENT eq "1850-2000"
make lapply_nhx_surface_emis a local perl variable before passing to add_default

Testing:
MARBL commit 89e48440802f373015b66a531ee8fad2444bef82

aux_pop_MARBL (yellowstone/intel yellowstone/gnu): (baseline comparison to n11 tag)
   all tests pass

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    17 Jul 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n13_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: add support for NHx emissions from BGC

new namelist variable lapply_nhx_surface_emis, default .false.
add new aux_pop_MARBL test where lapply_nhx_surface_emis is .true.
change NOx, NHy forcing datasets if lapply_nhx_surface_emis is .true.

Testing:
MARBL commit be96f6bf00672eb7c5b75da9abd23996f1d24971

aux_pop_MARBL (yellowstone/intel yellowstone/gnu hobart/nag): (baseline comparison to n11 tag)
   all tests pass
      some nlcomp tests fail because of added namelist variables
      new apply_nhx_surface_emis tests fail baseline compare

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/ecosys_apply_nhx_surface_emis/user_nl_pop
M       input_templates/ocn.ecosys.tavg.csh

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    13 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n12_marbl_dev_n12_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n12 tag to this branch

no code or script changes

Testing: verified that code builds with ifort and gfortran

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n11_marbl_dev_n11_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n11 tag to this branch

Testing:
MARBL commit ec20fe2bacd93abd5126e2f9e2e49c42e1a5e998

aux_pop_MARBL (intel and gnu): (baseline comparison to n10 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       SVN_EXTERNAL_DIRECTORIES
 M      drivers/cpl
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    9 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n10_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: hobart/nag fix and cleanup from code review

fix IO format strings for nag (X -> 1X)
add valid_values to namelist vars in namelist_definition_pop.xml
remove unneeded use statements
refactor test definitions
add CECO ecosys_ladjust_bury_coeff test to hobart/nag

Testing:
MARBL commit 48f9406b5a1a8ba3c6566488d31edfd0486b504f

aux_pop_MARBL (intel and gnu): (baseline comparison to n09 tag)
   all tests pass

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
D       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
        > moved to cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_dust_flux_driver/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/include_user_mods
A  +    cime_config/testdefs/testmods_dirs/pop/ecosys_ladjust_bury_coeff/user_nl_pop
        > moved from cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 Jun 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n09_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: implement global averages, scalar running means, ladjust_bury_coeff

global averages and scalar running means are computed in POP
   running means will be moved to MARBL later
introduce set_global_scalars to MARBL interface
introduce namelist vars for ladjust_bury_coeff
add test for ladjust_bury_coeff=.true.

Testing:
MARBL commit 99dee6ac49767996e314343aa15d4e2996802e00

aux_pop_MARBL (intel and gnu): (baseline comparison to n08 tag)
   all tests pass, with the following exceptions
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_ladjust_bury_coeff fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit
   lack of subsequent tags indicates success


Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_ladjust_bury_coeff/user_nl_pop
M       source/ecosys_driver.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    24 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n08_marbl_dev_n10_cesm_pop_2_1_20160513
Tag Summary: merge marbl_dev n10 tag to this branch

Testing:
MARBL commit 8b3b1e9449d609a17a5cd0fba6bb0c2bb3791808

aux_pop_MARBL (intel and gnu): (baseline comparison to n06 tag)
   (stored n06 baselines were accidentally done with pre-tagged version of code, resulting in some baseline fails)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/config_files/definition.xml
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
 M      drivers/cpl
A  +    input_templates/ocn.sf6.tavg.csh
M       source/POP_DistributionMod.F90
M       source/POP_SpaceCurveMod.F90
M       source/distribution.F90
M       source/domain.F90
M       source/passive_tracers.F90
M       source/restart.F90
A  +    source/sf6_mod.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    12 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n07_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: clean up comments, add new _CPL fields to lecosys_debug tavg output

Testing: verified that code builds with ifort and gfortran

Files Modified:
M       BranchBranchChangeLog
M       input_templates/ocn.ecosys.tavg.csh
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    10 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n06_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: enable iron flux to be derived from driver dust and black carbon

pass black carbon flux from coupler into MARBL, if requested
add iron_flux_source namelist variable, valid values='monthly-calendar,driver-derived'
add namelist variables related to iron_flux_source='driver-derived'
   iron_frac_in_dust, iron_frac_in_bc
add iron_flux_source='driver-derived' to cice_ecosys_dust_flux_driver test definition

Testing:
MARBL commit 8e9cd21960792dd0d87b86ae9b2c335b548d1191

aux_pop_MARBL (intel and gnu): (baseline comparison to n04 tag)
   all tests pass, with the following exceptions 
      some nlcomp tests fail because of added namelist variables
      cice_ecosys_dust_flux_driver fails baseline compare because of changed test defn

aux_pop_MARBL on hobart (nag) will be done after commit/tag
   lack of subsequent tags indicates success

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n05_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: add testmods_dirs that were omitted in marbl_dev_klindsay_n03

Testing: none

Files Modified:
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/include_user_mods
A       cime_config/testdefs/testmods_dirs/pop/cice_ecosys_dust_flux_driver/user_nl_pop

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    4 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n04_marbl_dev_n07_cesm_pop_2_1_20160426
Tag Summary: merge marbl_dev n07 tag to this branch

Testing:
MARBL commit 018d284ca4db1ecadbebccbe127fa665238a8bc8

aux_pop_MARBL: (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

aux_pop_MARBL (gnu): (baseline comparison to n03 tag)
   all tests pass, except nlcomp, which all fail

Files Modified:
 M      .
M       BranchBranchChangeLog
M       BranchChangeLog
M       ChangeLog
M       SVN_EXTERNAL_DIRECTORIES
M       bld/build-namelist
M       bld/configure
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml
M       source/baroclinic.F90
M       source/ecosys_driver.F90
M       source/ecosys_tavg.F90
A  +    source/estuary_vsf_mod.F90
M       source/forcing_coupled.F90
M       source/initial.F90
M       source/passive_tracer_tools.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    3 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n03_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: add dust_flux_source namelist variable, valid values='monthly-calendar,driver'

add dust_flux_source namelist variable, valid values='monthly-calendar,driver'
add ERS.T62_g37.GECO.yellowstone_intel.pop-cice_ecosys_dust_flux_driver test
caveat: forgot to add testmods_dir for new test, this will be fixed in a later tag

Testing:
MARBL commit 8a67dffe09aad08daa84b23dfa1986f1aa04b1e0
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   tests pass with following exceptions
      some nlcomp tests fail because of new namelist variable

Files Modified:
M       BranchBranchChangeLog
M       bld/build-namelist
M       bld/namelist_files/namelist_defaults_pop.xml
M       bld/namelist_files/namelist_definition_pop.xml
M       cime_config/testdefs/testlist_pop.xml

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n02_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: cleanup of marbl_dev_klindsay_n01

remove unnecessary module use statement
place contents of this file into BranchBranchChangeLog
restore marbl_dev BranchChangeLog

Testing: confirmed successful build of CECO testcase with gnu

Files Modified:
A       BranchBranchChangeLog
M       BranchChangeLog
M       source/ecosys_driver.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    2 May 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n01_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: pass dust flux from coupler into MARBL, if requested

1) pack sum of dust flux fields from coupler into POP array
2) make POP dust flux field available via tavg (DUST_FLUX_CPL)
3) pass POP dust flux field to MARBL, if requested
4) apply unit_conv_factor to all input_forcing_data fields

Testing:
MARBL commit cb10c64aaa87fa262cb9a42ca822478fffd9d8eb
ecosys_tavg.F90 from cesm_pop_2_1_20160413 included in testing, but not in this tag

aux_pop_MARBL: (baseline comparison to n00 tag)
   all tests pass

aux_pop_MARBL (gnu): (baseline comparison to n00 tag)
   all tests pass

Files Modified:
M       BranchChangeLog
M       drivers/cpl/ocn_import_export.F90
M       source/ecosys_driver.F90
M       source/forcing.F90
M       source/forcing_coupled.F90
M       source/forcing_fields.F90
M       source/passive_tracers.F90

===============================================================================

Tag Creator: klindsay
Developers:  klindsay
Tag Date:    25 Apr 2016
Tag Name:    pop2/branch_tags/marbl_dev_klindsay_tags/marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407
Tag Summary: Initial branch tag, identical to marbl_dev_klindsay_n00_marbl_dev_n03_cesm_pop_2_1_20160407 trunk tag

===============================================================================
